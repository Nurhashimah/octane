.container{:style => "padding-left: 60px;"}
  = form_for @depot_fuel, :html => { :class => 'form-horizontal' }  do |f|
    = render 'shared/error_messages', object: f.object
    
    .control-group
      = f.label :unit_id, :class => 'control-label'
      .controls= f.collection_select :unit_id, Unit.is_depot.order(name: :desc), :id, :name, :include_blank => t('helpers.prompt.select_depot'), :html_options => {:class => 'selectpicker'}
    
    .control-group
      = f.label :issue_date, :class => 'control-label'
      .controls= f.text_field :issue_date, :class => 'text_field', :type => :text, 'data-behaviour' => 'datepicker_before'

    %br
 
    %ul.nav.nav-tabs
      %li.active= link_to t('fuel_supplieds.title2'),        '#tab1', data: {toggle: 'tab'}
      %li= link_to t('fuel_issueds.title2'),  '#tab2', data: {toggle: 'tab'}
      %li= link_to t('fuel_balances.title2'),  '#tab3', data: {toggle: 'tab'}
    - @tanks=FuelTank.in_use.includes(:unit).includes(:fuel_type).order(:id) 
    #myTabContent.tab-content	
      #tab1.tab-pane.active
        .row
          .span8
            %font{:size => "-1"}
              =t 'helpers.prompt.supplied'
        .form-group
          .col-lg-offset-2.col-lg-10
            = f.fields_for :fuel_supplieds do |builder|
              = render 'fuel_supplied_fields', f: builder
            .row
              = link_to_add_fields t('actions.addmore'), f, :fuel_supplieds, "",  t('actions.addmore')
      
      #tab2.tab-pane
        .row
          .span8
            %font{:size => "-1"}
              =t 'helpers.prompt.issued'
        .form-group
          .col-lg-offset-2.col-lg-10
            = f.fields_for :fuel_issueds do |builder|
              = render 'fuel_issued_fields', f: builder
            .row
              = link_to_add_fields t('actions.addmore'), f, :fuel_issueds, "",  t('actions.addmore')

      #tab3.tab-pane
        .row
          .span8
            %font{:size => "-1"}
              =t 'helpers.prompt.balance'
              %br=t 'helpers.prompt.select_depot_for_tanks'
        .form-group
          .col-lg-offset-2.col-lg-10
            = f.fields_for :fuel_balances do |builder|
              = render 'fuel_balance_fields', f: builder
            .row
              = link_to_add_fields t('actions.addmore'), f, :fuel_balances, "",  t('actions.addmore')

    .form-actions
      = f.submit (t 'helpers.links.submit'), :class => 'btn btn-primary'
      .btn.btn-default= link_to t('.cancel', :default => t("helpers.links.cancel")), |
        depot_fuels_path

    .span{style: 'display: none;'}
      = f.select :tanks_by_depot, FuelTank.by_depot, {include_blank:  (t 'helpers.prompt.select_fuel_tank')}

:javascript

  $('#depot_fuel_unit_id').change(function(){
    var selected_depot=$('#depot_fuel_unit_id :selected').text();
    var tank_select_fields=document.getElementsByClassName('test');
    var abb=document.getElementById('depot_fuel_tanks_by_depot');
    
    /*alert(selected_depot);*/
    /*alert(tank_select_fields.length);*/
    
    /*xyy.innerHTML = abb.innerHTML;*/
    /*alert('mana'+$('#'+tank_select_fields[0].id).html());*/
    
    /*$('#'+tank_select_fields[0].id).html($("#depot_fuel_testone").html());*/
    /*alert('mana2'+$('#'+tank_select_fields[0].id).html());*/
    
    for(i=0; i<tank_select_fields.length; i++)
   {  
      $('#'+tank_select_fields[i].id).html($("#depot_fuel_tanks_by_depot").html());
      var nn=$('#'+tank_select_fields[i].id).html();
      var options = $(nn).filter("optgroup[label='" + selected_depot + "']").html();
      if (options)
      {  
        $('#'+tank_select_fields[i].id).html(options); 
        $('#'+tank_select_fields[i].id).parent().show();
      }
      else
      {  $('#'+tank_select_fields[i].id).empty();  }
    } 
     
  });
